<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: GetData.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: GetData.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Created by landon on 03/11/16.
 */
var GlobalLink = [];
var Uri1 = "http://schema.org/Order";
var Uri2 = "http://schema.org/Offer";
var Uri3 = "http://schema.org/Person";
var Prd2 = "http://schema.org/price";
var Prd1 = "http://schema.org/orderDate";
var Pam1 = new Parameter("http://schema.org/orderDate","http://schema.org/Order");
var Pam2 = new Parameter("http://schema.org/price","http://schema.org/Offer");
var Pam3 = new Parameter("http://schema.org/name", "http://schema.org/Place");
var Pam4 = new Parameter("http://schema.org/name", "http://schema.org/Person");
var GlobalData = [];

/**
 * @description This function Discovers the Link between two Parameters and then Retreives the data from the Path discovered
 * Global Parameters created for testing in the console
 * @param Param1 - The X variable for the chart
 * @param Param2 - The Y variable for the chart
 * @param graph - The already made Store.
 * @constructor
 */
function GetLink(Param1, Param2, graph){
    var uri1 = Param1.class_value;
    var uri2 = Param2.class_value;
    GlobalLink = [];
    /*
     select ?link1 where { ?x ?link1 ? ?y ; rdf:type schemaorg:ParcelDelivery. ?y rdf:type schemaorg:Offer }
     */
    graph.execute('PREFIX rdf:  &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#>\
                   PREFIX : &lt;http://example.org/>\
                   SELECT ?link1 FROM NAMED :rdfGraph { GRAPH ?g { \
                   ?s ?link1 ?y; \
                   rdf:type &lt;'+uri1+'>.\
                   ?y rdf:type &lt;'+uri2+'>.  } }',
        function (err, results) {
            console.log("Get One Link Results:" );
            console.log(results);

            for (var i = 0; i &lt; results.length; i++){
                var found = false;
                var temp = results[i].link1.value;
                for (var x = 0; x &lt; GlobalLink.length; x++){
                    if (temp == GlobalLink[x]){
                        found = true;
                    }
                }
                if (!found){
                    GlobalLink.push(temp);
                }
            }

            //If length is > 0 then a apth exists and data will be retrived
            if(GlobalLink.length > 0) {
                console.log(uri1);
                GetData(Param1.name, Param2.name, GlobalStore);
            }

        }
    );

}

/**
 *
 * @param uri1
 * @param uri2
 * @constructor
 * @todo Make this function to make a dynamic query based on how long the link is.
 */
function QueryBuilder(uri1, uri2){
    var string1 = 'PREFIX rdf:  &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#>\
                   PREFIX : &lt;http://example.org/>';
    var string2 = 'select ?subject ?data1 ?data2 FROM NAMED :rdfGraph {GRAPH ?g { \
                   ?subject &lt;'+uri1+'> ?data1.';


    var stingx = '}}';
}

/**
 * @description Takes Two uri's for the X and Y variables respectivley. And grabs the data from the Path defined in the GlobalLink
 * Pushed data as an array of pairs, representing the X,Y data points. The Array is currently Stored in the GlobalData array
 *
 * @param uri1
 * @param uri2
 * @param graph
 * @todo Why does the function only work one way? try a reverse of the above function.
 */
function GetData(uri1, uri2, graph){
    graph.execute('PREFIX rdf:  &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#>\
         PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/>\
         PREFIX : &lt;http://example.org/>\
         select ?p ?o ?o3 FROM NAMED :rdfGraph { GRAPH ?g { ?s ?p ?o. \
        ?s &lt;'+uri1+'> ?o.\
        ?s &lt;'+GlobalLink[0]+'> ?o2.\
        ?o2 &lt;'+uri2+'> ?o3.\
        FILTER(?p != rdf:type). } }',
        function(err, results) {
            console.log("Results:");
            console.log(results);

            for (var i = 0; i &lt; results.length; i++) {
                var double = [results[i].o.value, results[i].o3.value];
                GlobalData.push(double);
            }
        }
    );
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BarChart.html">BarChart</a></li><li><a href="GetLink.html">GetLink</a></li><li><a href="Graph.html">Graph</a></li><li><a href="GraphStore.html">GraphStore</a></li><li><a href="Parameter.html">Parameter</a></li><li><a href="ParameterManager.html">ParameterManager</a></li><li><a href="QueryBuilder.html">QueryBuilder</a></li></ul><h3>Global</h3><ul><li><a href="global.html#array_of_paramnames">array_of_paramnames</a></li><li><a href="global.html#createDrags">createDrags</a></li><li><a href="global.html#GetData">GetData</a></li><li><a href="global.html#GetName">GetName</a></li><li><a href="global.html#GetParameterQuery">GetParameterQuery</a></li><li><a href="global.html#GetPredicateQuery">GetPredicateQuery</a></li><li><a href="global.html#GlobalLink">GlobalLink</a></li><li><a href="global.html#openCity">openCity</a></li><li><a href="global.html#refreshData">refreshData</a></li><li><a href="global.html#TypeArray">TypeArray</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a> on Thu Nov 03 2016 23:59:32 GMT-0600 (MDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
